/* ColorBox v1.4.11, (c) 2011 Jack Moore - jacklmoore.com, MIT license */
(function(e,t,n){function G(n,r,i){var o=t.createElement(n);return r&&(o.id=s+r),i&&(o.style.cssText=i),e(o)}function Y(){return n.innerHeight?n.innerHeight:e(n).height()}function Z(e){var t=E.length,n=(q+e)%t;return n<0?t+n:n}function et(e,t){return Math.round((/%/.test(e)?(t==="x"?S.width():Y())/100:1)*parseInt(e,10))}function tt(e,t){return e.photo||e.photoRegex.test(t)}function nt(e,t){return e.retinaUrl&&n.devicePixelRatio>1?t.replace(e.photoRegex,e.retinaSuffix):t}function rt(e){"contains"in d[0]&&!d[0].contains(e.target)&&(e.stopPropagation(),d.focus())}function it(){var t,n=e.data(I,i);n==null?(P=e.extend({},r),console&&console.log&&console.log("Error: cboxElement missing settings object")):P=e.extend({},n);for(t in P)e.isFunction(P[t])&&t.slice(0,2)!=="on"&&(P[t]=P[t].call(I));P.rel=P.rel||I.rel||e(I).data("rel")||"nofollow",P.href=P.href||e(I).attr("href"),P.title=P.title||I.title,typeof P.href=="string"&&(P.href=e.trim(P.href))}function st(n,r){e(t).trigger(n),D.trigger(n),e.isFunction(r)&&r.call(I)}function ot(){var e,t=s+"Slideshow_",n="click."+s,r,i,o,u;P.slideshow&&E[1]?(r=function(){clearTimeout(e)},i=function(){if(P.loop||E[q+1])e=setTimeout(V.next,P.slideshowSpeed)},o=function(){L.html(P.slideshowStop).unbind(n).one(n,u),D.bind(f,i).bind(a,r).bind(l,u),d.removeClass(t+"off").addClass(t+"on")},u=function(){r(),D.unbind(f,i).unbind(a,r).unbind(l,u),L.html(P.slideshowStart).unbind(n).one(n,function(){V.next(),o()}),d.removeClass(t+"on").addClass(t+"off")},P.slideshowAuto?o():u()):d.removeClass(t+"off "+t+"on")}function ut(n){W||(I=n,it(),E=e(I),q=0,P.rel!=="nofollow"&&(E=e("."+o).filter(function(){var t=e.data(this,i),n;return t&&(n=e(this).data("rel")||t.rel||this.rel),n===P.rel}),q=E.index(I),q===-1&&(E=E.add(I),q=E.length-1)),p.css({opacity:parseFloat(P.opacity),cursor:P.overlayClose?"pointer":"auto",visibility:"visible"}).show(),J&&d.add(p).removeClass(J),P.className&&d.add(p).addClass(P.className),J=P.className,M.html(P.close).show(),U||(U=z=!0,d.css({visibility:"hidden",display:"block"}),x=G($,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(m),H=g.height()+w.height()+m.outerHeight(!0)-m.height(),B=y.width()+b.width()+m.outerWidth(!0)-m.width(),j=x.outerHeight(!0),F=x.outerWidth(!0),P.w=et(P.initialWidth,"x"),P.h=et(P.initialHeight,"y"),V.position(),ot(),st(u,P.onOpen),_.add(C).hide(),d.focus(),t.addEventListener&&(t.addEventListener("focus",rt,!0),D.one(c,function(){t.removeEventListener("focus",rt,!0)})),P.returnFocus&&D.one(c,function(){e(I).focus()})),lt())}function at(){!d&&t.body&&(Q=!1,S=e(n),d=G($).attr({id:i,"class":e.support.opacity===!1?s+"IE":"",role:"dialog",tabindex:"-1"}).hide(),p=G($,"Overlay").hide(),N=G($,"LoadingOverlay").add(G($,"LoadingGraphic")),v=G($,"Wrapper"),m=G($,"Content").append(C=G($,"Title"),k=G($,"Current"),O=e("<button/>").attr({id:s+"Previous",type:"button"}),A=e("<button/>").attr({id:s+"Next",type:"button"}),L=G("button","Slideshow"),N,M=e("<button/>").attr({id:s+"Close",type:"button"})),v.append(G($).append(G($,"TopLeft"),g=G($,"TopCenter"),G($,"TopRight")),G($,!1,"clear:left").append(y=G($,"MiddleLeft"),m,b=G($,"MiddleRight")),G($,!1,"clear:left").append(G($,"BottomLeft"),w=G($,"BottomCenter"),G($,"BottomRight"))).find("div div").css({"float":"left"}),T=G($,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),_=A.add(O).add(k).add(L),e(t.body).append(p,d.append(v,T)))}function ft(){function n(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.control||(e.preventDefault(),ut(this))}return d?(Q||(Q=!0,A.click(function(){V.next()}),O.click(function(){V.prev()}),M.click(function(){V.close()}),p.click(function(){P.overlayClose&&V.close()}),e(t).bind("keydown."+s,function(e){var t=e.keyCode;U&&P.escKey&&t===27&&(e.preventDefault(),V.close()),U&&P.arrowKey&&E[1]&&!e.altKey&&(t===37?(e.preventDefault(),O.click()):t===39&&(e.preventDefault(),A.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+s,"."+o,n):e("."+o).live("click."+s,n)),!0):!1}function lt(){var t,r,i=V.prep,o,u=++K;z=!0,R=!1,I=E[q],it(),st(h),st(a,P.onLoad),P.h=P.height?et(P.height,"y")-j-H:P.innerHeight&&et(P.innerHeight,"y"),P.w=P.width?et(P.width,"x")-F-B:P.innerWidth&&et(P.innerWidth,"x"),P.mw=P.w,P.mh=P.h,P.maxWidth&&(P.mw=et(P.maxWidth,"x")-F-B,P.mw=P.w&&P.w<P.mw?P.w:P.mw),P.maxHeight&&(P.mh=et(P.maxHeight,"y")-j-H,P.mh=P.h&&P.h<P.mh?P.h:P.mh),t=P.href,X=setTimeout(function(){N.show()},100),P.inline?(o=G($).hide().insertBefore(e(t)[0]),D.one(h,function(){o.replaceWith(x.children())}),i(e(t))):P.iframe?i(" "):P.html?i(P.html):tt(P,t)?(t=nt(P,t),e(R=new Image).addClass(s+"Photo").bind("error",function(){P.title=!1,i(G($,"Error").html(P.imgError))}).one("load",function(){var t;if(u!==K)return;R.alt=e(I).attr("alt")||e(I).attr("data-alt")||"",R.longdesc=e(I).attr("longdesc"),P.retinaImage&&n.devicePixelRatio>1&&(R.height=R.height/n.devicePixelRatio,R.width=R.width/n.devicePixelRatio),P.scalePhotos&&(r=function(){R.height-=R.height*t,R.width-=R.width*t},P.mw&&R.width>P.mw&&(t=(R.width-P.mw)/R.width,r()),P.mh&&R.height>P.mh&&(t=(R.height-P.mh)/R.height,r())),P.h&&(R.style.marginTop=Math.max(P.mh-R.height,0)/2+"px"),E[1]&&(P.loop||E[q+1])&&(R.style.cursor="pointer",R.onclick=function(){V.next()}),setTimeout(function(){i(R)},1)}),setTimeout(function(){R.src=t},1)):t&&T.load(t,P.data,function(t,n){u===K&&i(n==="error"?G($,"Error").html(P.xhrError):e(this).contents())})}var r={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined},i="colorbox",s="cbox",o=s+"Element",u=s+"_open",a=s+"_load",f=s+"_complete",l=s+"_cleanup",c=s+"_closed",h=s+"_purge",p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D=e("<a/>"),P,H,B,j,F,I,q,R,U,z,W,X,V,$="div",J,K=0,Q;if(e.colorbox)return;e(at),V=e.fn[i]=e[i]=function(t,n){var s=this;t=t||{},at();if(ft()){if(e.isFunction(s))s=e("<a/>"),t.open=!0;else if(!s[0])return s;n&&(t.onComplete=n),s.each(function(){e.data(this,i,e.extend({},e.data(this,i)||r,t))}).addClass(o),(e.isFunction(t.open)&&t.open.call(s)||t.open)&&ut(s[0])}return s},V.position=function(e,t){function f(e){g[0].style.width=w[0].style.width=m[0].style.width=parseInt(e.style.width,10)-B+"px",m[0].style.height=y[0].style.height=b[0].style.height=parseInt(e.style.height,10)-H+"px"}var n,r=0,i=0,o=d.offset(),u,a;S.unbind("resize."+s),d.css({top:-9e4,left:-9e4}),u=S.scrollTop(),a=S.scrollLeft(),P.fixed?(o.top-=u,o.left-=a,d.css({position:"fixed"})):(r=u,i=a,d.css({position:"absolute"})),P.right!==!1?i+=Math.max(S.width()-P.w-F-B-et(P.right,"x"),0):P.left!==!1?i+=et(P.left,"x"):i+=Math.round(Math.max(S.width()-P.w-F-B,0)/2),P.bottom!==!1?r+=Math.max(Y()-P.h-j-H-et(P.bottom,"y"),0):P.top!==!1?r+=et(P.top,"y"):r+=Math.round(Math.max(Y()-P.h-j-H,0)/2),d.css({top:o.top,left:o.left,visibility:"visible"}),e=d.width()===P.w+F&&d.height()===P.h+j?0:e||0,v[0].style.width=v[0].style.height="9999px",n={width:P.w+F+B,height:P.h+j+H,top:r,left:i},e===0&&d.css(n),d.dequeue().animate(n,{duration:e,complete:function(){f(this),z=!1,v[0].style.width=P.w+F+B+"px",v[0].style.height=P.h+j+H+"px",P.reposition&&setTimeout(function(){S.bind("resize."+s,V.position)},1),t&&t()},step:function(){f(this)}})},V.resize=function(e){U&&(e=e||{},e.width&&(P.w=et(e.width,"x")-F-B),e.innerWidth&&(P.w=et(e.innerWidth,"x")),x.css({width:P.w}),e.height&&(P.h=et(e.height,"y")-j-H),e.innerHeight&&(P.h=et(e.innerHeight,"y")),!e.innerHeight&&!e.height&&(x.css({height:"auto"}),P.h=x.height()),x.css({height:P.h}),V.position(P.transition==="none"?0:P.speed))},V.prep=function(t){function o(){return P.w=P.w||x.width(),P.w=P.mw&&P.mw<P.w?P.mw:P.w,P.w}function u(){return P.h=P.h||x.height(),P.h=P.mh&&P.mh<P.h?P.mh:P.h,P.h}if(!U)return;var n,r=P.transition==="none"?0:P.speed;x.empty().remove(),x=G($,"LoadedContent").append(t),x.hide().appendTo(T.show()).css({width:o(),overflow:P.scrolling?"auto":"hidden"}).css({height:u()}).prependTo(m),T.hide(),e(R).css({"float":"none"}),n=function(){function l(){e.support.opacity===!1&&d[0].style.removeAttribute("filter")}var t=E.length,n,o="frameBorder",u="allowTransparency",a;if(!U)return;a=function(){clearTimeout(X),N.hide(),st(f,P.onComplete)},C.html(P.title).add(x).show(),t>1?(typeof P.current=="string"&&k.html(P.current.replace("{current}",q+1).replace("{total}",t)).show(),A[P.loop||q<t-1?"show":"hide"]().html(P.next),O[P.loop||q?"show":"hide"]().html(P.previous),P.slideshow&&L.show(),P.preloading&&e.each([Z(-1),Z(1)],function(){var t,n,r=E[this],s=e.data(r,i);s&&s.href?(t=s.href,e.isFunction(t)&&(t=t.call(r))):t=e(r).attr("href"),t&&tt(s,t)&&(t=nt(s,t),n=new Image,n.src=t)})):_.hide(),P.iframe?(n=G("iframe")[0],o in n&&(n[o]=0),u in n&&(n[u]="true"),P.scrolling||(n.scrolling="no"),e(n).attr({src:P.href,name:(new Date).getTime(),"class":s+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",a).appendTo(x),D.one(h,function(){n.src="//about:blank"}),P.fastIframe&&e(n).trigger("load")):a(),P.transition==="fade"?d.fadeTo(r,1,l):l()},P.transition==="fade"?d.fadeTo(r,0,function(){V.position(0,n)}):V.position(r,n)},V.next=function(){!z&&E[1]&&(P.loop||E[q+1])&&(q=Z(1),ut(E[q]))},V.prev=function(){!z&&E[1]&&(P.loop||q)&&(q=Z(-1),ut(E[q]))},V.close=function(){U&&!W&&(W=!0,U=!1,st(l,P.onCleanup),S.unbind("."+s),p.fadeTo(200,0),d.stop().fadeTo(300,0,function(){d.add(p).css({opacity:1,cursor:"auto"}).hide(),st(h),x.empty().remove(),setTimeout(function(){W=!1,st(c,P.onClosed)},1)}))},V.remove=function(){if(!d)return;d.stop(),e.colorbox.close(),d.stop().remove(),p.remove(),W=!1,d=null,e("."+o).removeData(i).removeClass(o),e(t).unbind("click."+s)},V.element=function(){return e(I)},V.settings=r})(jQuery,document,window);